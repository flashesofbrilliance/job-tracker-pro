<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Search Optimization Platform</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="header-left">
                    <h1 class="app-title">
                        <i class="fas fa-briefcase"></i>
                        Job Search Optimizer
                    </h1>
                    <div class="header-stats">
                        <span class="stat-item">
                            <span class="stat-value" id="total-roles">50</span>
                            <span class="stat-label">Total Roles</span>
                        </span>
                        <span class="stat-item">
                            <span class="stat-value" id="active-roles">50</span>
                            <span class="stat-label">Active</span>
                        </span>
                        <span class="stat-item">
                            <span class="stat-value" id="avg-fit-score">8.4</span>
                            <span class="stat-label">Avg Fit Score</span>
                        </span>
                    </div>
                </div>
                <div class="header-actions">
                    <button class="btn btn--secondary btn--sm" id="import-btn">
                        <i class="fas fa-upload"></i> Import CSV
                    </button>
                    <button class="btn btn--secondary btn--sm" id="export-btn">
                        <i class="fas fa-download"></i> Export
                    </button>
                    <button class="btn btn--outline btn--sm" id="reset-pipeline-btn">
                        <i class="fas fa-refresh"></i> Reset Pipeline
                    </button>
                    <a class="btn btn--secondary btn--sm" href="game.html">
                        <i class="fas fa-gamepad"></i> Play Training Game
                    </a>
                </div>
            </div>
        </header>

        <!-- Main Dashboard -->
        <main class="main-content">
            <!-- Dashboard Overview -->
            <section class="dashboard-section">
                <div class="dashboard-cards">
                    <div class="dashboard-card">
                        <div class="card-icon success">
                            <i class="fas fa-handshake"></i>
                        </div>
                        <div class="card-content">
                            <h3 class="card-title">Offers</h3>
                            <div class="card-value" id="offers-count">0</div>
                            <div class="card-change neutral">Ready to convert</div>
                        </div>
                    </div>
                    <div class="dashboard-card">
                        <div class="card-icon warning">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="card-content">
                            <h3 class="card-title">Interviewing</h3>
                            <div class="card-value" id="interviewing-count">0</div>
                            <div class="card-change neutral">Pipeline ready</div>
                        </div>
                    </div>
                    <div class="dashboard-card">
                        <div class="card-icon info">
                            <i class="fas fa-paper-plane"></i>
                        </div>
                        <div class="card-content">
                            <h3 class="card-title">Applied</h3>
                            <div class="card-value" id="applied-count">0</div>
                            <div class="card-change neutral">Ready to apply</div>
                        </div>
                    </div>
                    <div class="dashboard-card">
                        <div class="card-icon primary">
                            <i class="fas fa-search"></i>
                        </div>
                        <div class="card-content">
                            <h3 class="card-title">Not Started</h3>
                            <div class="card-value" id="not-started-count">50</div>
                            <div class="card-change positive">Fresh opportunities</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Controls -->
            <section class="controls-section">
                <div class="controls-left">
                    <div class="view-switcher">
                        <button class="view-btn" data-view="table">
                            <i class="fas fa-table"></i> Table
                        </button>
                        <button class="view-btn active" data-view="kanban">
                            <i class="fas fa-columns"></i> Pipeline
                        </button>
                        <button class="view-btn" data-view="analytics">
                            <i class="fas fa-chart-bar"></i> Analytics
                        </button>
                        <button class="view-btn" data-view="discover">
                            <i class="fas fa-compass"></i> Discover
                        </button>
                    </div>
                    <div class="bulk-actions hidden" id="bulk-actions">
                        <span class="bulk-counter" id="bulk-counter">0 selected</span>
                        <button class="btn btn--sm btn--outline" id="bulk-edit-btn">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                        <button class="btn btn--sm btn--secondary" id="bulk-archive-btn">
                            <i class="fas fa-archive"></i> Archive
                        </button>
                        <button class="btn btn--sm btn--outline" id="bulk-reset-btn">
                            <i class="fas fa-undo"></i> Reset Stage
                        </button>
                    </div>
                </div>
                <div class="controls-right">
                    <div class="search-container">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" class="search-input" placeholder="Search companies, roles, or tags..." id="search-input">
                    </div>
                    <div class="filter-container">
                        <button class="filter-btn" id="filter-btn">
                            <i class="fas fa-filter"></i> Filters
                            <span class="filter-count hidden" id="filter-count">0</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Filters Panel -->
            <div class="filters-panel hidden" id="filters-panel">
                <div class="filters-content">
                    <div class="filter-group">
                        <label class="filter-label">Status</label>
                        <div class="filter-options">
                            <label class="checkbox-label">
                                <input type="checkbox" value="not-started" class="status-filter">
                                <span class="checkmark"></span>
                                Not Started
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="research" class="status-filter">
                                <span class="checkmark"></span>
                                Research
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="applied" class="status-filter">
                                <span class="checkmark"></span>
                                Applied
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="interviewing" class="status-filter">
                                <span class="checkmark"></span>
                                Interviewing
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="offer" class="status-filter">
                                <span class="checkmark"></span>
                                Offer
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="rejected" class="status-filter">
                                <span class="checkmark"></span>
                                Rejected
                            </label>
                        </div>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">Fit Score</label>
                        <input type="range" class="range-slider" id="fit-score-range" min="0" max="10" step="0.1" value="0">
                        <div class="range-labels">
                            <span>0</span>
                            <span id="fit-score-value">0+</span>
                        </div>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">Salary Range</label>
                        <input type="range" class="range-slider" id="salary-range" min="150" max="500" step="10" value="150">
                        <div class="range-labels">
                            <span>$150k</span>
                            <span id="salary-value">$150k+</span>
                        </div>
                    </div>
                    <div class="filter-actions">
                        <button class="btn btn--outline btn--sm" id="clear-filters-btn">Clear All</button>
                        <button class="btn btn--primary btn--sm" id="apply-filters-btn">Apply Filters</button>
                    </div>
                </div>
            </div>

            <!-- Content Views -->
            <div class="content-views">
                <!-- Table View -->
                <div class="view-content" id="table-view">
                    <div class="table-container">
                        <table class="jobs-table">
                            <thead>
                                <tr>
                                    <th class="select-col">
                                        <input type="checkbox" id="select-all">
                                    </th>
                                    <th class="sortable" data-sort="company">
                                        Company <i class="fas fa-sort"></i>
                                    </th>
                                    <th class="sortable" data-sort="roleTitle">
                                        Role <i class="fas fa-sort"></i>
                                    </th>
                                    <th class="sortable" data-sort="status">
                                        Status <i class="fas fa-sort"></i>
                                    </th>
                                    <th class="sortable" data-sort="fitScore">
                                        Fit Score <i class="fas fa-sort"></i>
                                    </th>
                                    <th class="sortable" data-sort="salary">
                                        Salary <i class="fas fa-sort"></i>
                                    </th>
                                    <th class="sortable" data-sort="appliedDate">
                                        Applied <i class="fas fa-sort"></i>
                                    </th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="jobs-table-body">
                                <!-- Job rows will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Kanban View -->
                <div class="view-content active" id="kanban-view">
                    <div class="kanban-board">
                        <div class="kanban-column" data-status="not-started">
                            <div class="column-header">
                                <h3>Not Started <span class="count" id="not-started-kanban-count">50</span></h3>
                            </div>
                            <div class="column-content" id="not-started-column"></div>
                        </div>
                        <div class="kanban-column" data-status="research">
                            <div class="column-header">
                                <h3>Research <span class="count" id="research-kanban-count">0</span></h3>
                            </div>
                            <div class="column-content" id="research-column"></div>
                        </div>
                        <div class="kanban-column" data-status="applied">
                            <div class="column-header">
                                <h3>Applied <span class="count" id="applied-kanban-count">0</span></h3>
                            </div>
                            <div class="column-content" id="applied-column"></div>
                        </div>
                        <div class="kanban-column" data-status="interviewing">
                            <div class="column-header">
                                <h3>Interviewing <span class="count" id="interviewing-kanban-count">0</span></h3>
                            </div>
                            <div class="column-content" id="interviewing-column"></div>
                        </div>
                        <div class="kanban-column" data-status="offer">
                            <div class="column-header">
                                <h3>Offers <span class="count" id="offer-kanban-count">0</span></h3>
                            </div>
                            <div class="column-content" id="offer-column"></div>
                        </div>
                        <div class="kanban-column" data-status="rejected">
                            <div class="column-header">
                                <h3>Rejected <span class="count" id="rejected-kanban-count">0</span></h3>
                            </div>
                            <div class="column-content" id="rejected-column"></div>
                        </div>
                    </div>
                </div>

                <!-- Analytics View -->
                <div class="view-content" id="analytics-view">
                    <div class="analytics-grid">
                        <div class="analytics-card">
                            <h3>Pipeline Success Rate</h3>
                            <div class="chart-container" style="position: relative; height: 250px;">
                                <canvas id="success-rate-chart"></canvas>
                            </div>
                        </div>
                        <div class="analytics-card">
                            <h3>Fit Score Distribution</h3>
                            <div class="chart-container" style="position: relative; height: 250px;">
                                <canvas id="fit-score-chart"></canvas>
                            </div>
                        </div>
                        <div class="analytics-card">
                            <h3>Weekly Activity</h3>
                            <div class="chart-container" style="position: relative; height: 250px;">
                                <canvas id="timeline-chart"></canvas>
                            </div>
                        </div>
                        <div class="analytics-card">
                            <h3>Top Performing Segments</h3>
                            <div class="segment-stats" id="segment-stats"></div>
                        </div>
                    </div>
                </div>

                <!-- Discover View -->
                <div class="view-content" id="discover-view">
                    <div class="analytics-grid">
                        <div class="analytics-card">
                            <h3>Learning Signals</h3>
                            <div id="discover-insights"></div>
                        </div>
                        <div class="analytics-card">
                            <div class="card-header" style="display:flex;align-items:center;justify-content:space-between;gap:12px;">
                                <h3 style="margin:0;">Recommended Roles</h3>
                                <div style="display:flex;gap:8px;">
                                  <button class="btn btn--outline btn--sm" id="refresh-recos-btn"><i class="fas fa-sync"></i> Refresh</button>
                                </div>
                            </div>
                            <div id="discover-list" class="table-container"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Job Details Modal -->
        <div class="modal hidden" id="job-modal">
            <div class="modal-overlay" id="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title" id="modal-job-title">Job Details</h2>
                    <button class="modal-close" id="modal-close">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body" id="modal-body">
                    <!-- Job details will be populated by JavaScript -->
                </div>
                <div class="modal-footer">
                    <button class="btn btn--outline" id="modal-cancel">Close</button>
                    <button class="btn btn--primary" id="modal-save">Save Changes</button>
                </div>
            </div>
        </div>

        <!-- Add Activity Modal -->
        <div class="modal hidden" id="activity-modal">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title">Add Activity</h2>
                    <button class="modal-close" id="activity-modal-close">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="activity-form">
                        <div class="form-group">
                            <label class="form-label">Activity Type</label>
                            <select class="form-control" id="activity-type" required>
                                <option value="Research">Research</option>
                                <option value="Applied">Applied</option>
                                <option value="Response">Response</option>
                                <option value="Interview">Interview</option>
                                <option value="Follow-up">Follow-up</option>
                                <option value="Offer">Offer</option>
                                <option value="Rejection">Rejection</option>
                            </select>
                        </div>
                        <div class="form-group hidden" id="activity-reason-group">
                            <label class="form-label">Reason (if rejection)</label>
                            <select class="form-control" id="activity-reason">
                                <option value="">Select a reason…</option>
                                <option value="Compensation">Compensation</option>
                                <option value="Seniority/Level">Seniority/Level</option>
                                <option value="Location/Visa">Location/Visa</option>
                                <option value="Timing/Headcount">Timing/Headcount</option>
                                <option value="Domain Fit">Domain Fit</option>
                                <option value="Skills/Experience">Skills/Experience</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Date</label>
                            <input type="date" class="form-control" id="activity-date" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Notes</label>
                            <textarea class="form-control" id="activity-notes" rows="3" placeholder="Add details about this activity..."></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn--outline" id="activity-cancel">Cancel</button>
                    <button class="btn btn--primary" id="activity-save">Add Activity</button>
                </div>
            </div>
        </div>

        <!-- Reset Pipeline Modal -->
        <div class="modal hidden" id="reset-modal">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title">Reset Pipeline</h2>
                    <button class="modal-close" id="reset-modal-close">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="reset-options">
                        <h4>What would you like to reset?</h4>
                        <label class="checkbox-label">
                            <input type="checkbox" id="reset-stages">
                            <span class="checkmark"></span>
                            Reset all job stages to "Not Started"
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="reset-dates">
                            <span class="checkmark"></span>
                            Clear all application dates
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="reset-notes">
                            <span class="checkmark"></span>
                            Clear all notes and activity logs
                        </label>
                        <div class="warning-message">
                            <i class="fas fa-exclamation-triangle"></i>
                            <p>This action cannot be undone. Please confirm your selections carefully.</p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn--outline" id="reset-cancel">Cancel</button>
                    <button class="btn btn--primary" id="reset-confirm">Reset Pipeline</button>
                </div>
            </div>
        </div>

        <!-- Drag Preview -->
        <div class="drag-preview hidden" id="drag-preview"></div>

        <!-- Toast Notifications -->
        <div class="toast-container" id="toast-container"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="app.js"></script>
</body>
</html>
